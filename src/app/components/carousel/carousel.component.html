<div class="relative w-full overflow-hidden bg-gray-900 min-h-screen">
  <!-- Carousel header -->
  <h3
    *ngIf="carouselHeader"
    class="text-white text-xl font-bold px-4 md:px-8 pt-6 pb-0"
  >
    {{ carouselHeader }}
  </h3>

  <!-- Carousel container -->
  <div class="relative h-full mt-2 mb-6">
    <!-- Left scroll button -->
    <button
      *ngIf="canScrollLeft"
      (click)="scrollLeft()"
      class="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 z-30 bg-black bg-opacity-90 hover:bg-white hover:bg-opacity-20 active:bg-white active:text-black focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 text-white rounded-full p-3 md:p-4 shadow-lg"
      style="outline: none !important; border: none !important"
      aria-label="Scroll left"
      [tabindex]="getLeftButtonTabIndex()"
    >
      <svg
        class="w-6 h-6 md:w-8 md:h-8"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M15 19l-7-7 7-7"
        />
      </svg>
    </button>

    <!-- Right scroll button -->
    <button
      *ngIf="canScrollRight"
      (click)="scrollRight()"
      class="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 z-30 bg-black bg-opacity-90 hover:bg-white hover:bg-opacity-20 active:bg-white active:text-black focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-gray-900 text-white rounded-full p-3 md:p-4 shadow-lg"
      style="outline: none !important; border: none !important"
      aria-label="Scroll right"
      [tabindex]="getRightButtonTabIndex()"
    >
      <svg
        class="w-6 h-6 md:w-8 md:h-8"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M9 5l7 7-7 7"
        />
      </svg>
    </button>

    <!-- Carousel items -->
    <div class="relative flex h-full items-center overflow-hidden">
      <!-- Carousel ribbon with all items -->
      <div
        class="flex h-full items-center px-4 md:px-8"
        [class.transition-transform]="!isResizing"
        [class.duration-500]="!isResizing"
        [class.ease-in-out]="!isResizing"
        [style.gap.px]="itemGap"
        [style.transform]="getCarouselTransform()"
      >
        <div
          *ngFor="let item of visibleItems; let i = index"
          class="flex-shrink-0"
          [style.width]="getItemWidth()"
          [class.opacity-40]="getItemOpacity(i)"
        >
          <a
            [href]="item.canonicalUrl"
            target="_blank"
            rel="noopener noreferrer"
            class="relative group cursor-pointer h-full w-full block"
            [attr.aria-label]="item.heading"
            [tabindex]="getItemTabIndex(i)"
          >
            <div
              class="aspect-[2/3] overflow-hidden rounded-sm shadow-2xl bg-gray-800"
            >
              <img
                [src]="getImageUrl(item)"
                [alt]="item.heading"
                [sizes]="getImageSizes()"
                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                loading="lazy"
              />
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading state -->
  <div
    *ngIf="items.length === 0"
    class="absolute inset-0 flex items-center justify-center"
  >
    <div class="text-white text-xl">Loading content...</div>
  </div>
</div>
